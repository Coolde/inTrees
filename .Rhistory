rule_classifier <- buildLearner(rule_metric,X,Y)
readable <- presentRules(rule_classifier,colnames(X),digits=3)
pred <- applyLearner(rule_classifier,X)
print( 1-sum(pred==Y)/length(pred) )
rm(list= ls())
library(ranger)
library(inTrees)
# data 1
X <- within(iris,rm("Species")); Y <- iris[,"Species"]
rf_ranger <- ranger(Species ~ ., data = iris)
# data set 2
# path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
# data <- read.table(path,header=TRUE,sep = ",")
# X <- within(data,rm("Y")); Y <- data$Y
tree_list <- Ranger2List(rf_ranger)
rule_exec <- extractRules(tree_list,X,digits=3)
rule_exec <- unique(rule_exec) # remove same rules. NOTE: for variable interaction analysis, you should NOT perform this step
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
# freq_patterns <- getFreqPattern(rule_metric,maxlen = 3) # can be less useful for numeric variables.
rule_metric <- pruneRule(rule_metric,X,Y,typeDecay = 1)
rule_select <- selectRuleRRF(rule_metric, X, Y)
rule_metric <- unique(rule_metric)
rule_classifier <- buildLearner(rule_metric,X,Y)
readable <- presentRules(rule_classifier,colnames(X),digits=3)
pred <- applyLearner(rule_classifier,X)
print( 1-sum(pred==Y)/length(pred) )
rule_classifier
rm(list= ls())
library(ranger)
library(inTrees)
# data 1
X <- within(iris,rm("Species")); Y <- iris[,"Species"]
rf_ranger <- ranger(Species ~ ., data = iris)
# data set 2
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
tree_list <- Ranger2List(rf_ranger)
rule_exec <- extractRules(tree_list,X,digits=3)
rule_exec <- unique(rule_exec) # remove same rules. NOTE: for variable interaction analysis, you should NOT perform this step
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
# freq_patterns <- getFreqPattern(rule_metric,maxlen = 3) # can be less useful for numeric variables.
rule_metric <- pruneRule(rule_metric,X,Y,typeDecay = 1)
rule_select <- selectRuleRRF(rule_metric, X, Y)
rule_metric <- unique(rule_metric)
rule_classifier <- buildLearner(rule_metric,X,Y)
readable <- presentRules(rule_classifier,colnames(X),digits=3)
pred <- applyLearner(rule_classifier,X)
print(readable)
print( 1-sum(pred==Y)/length(pred) )
rule_metric
rm(list= ls())
library(ranger)
library(inTrees)
# data 1
X <- within(iris,rm("Species")); Y <- iris[,"Species"]
rf_ranger <- ranger(Species ~ ., data = iris)
# data set 2
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
tree_list <- Ranger2List(rf_ranger)
rule_exec <- extractRules(tree_list,X,digits=10)
rule_exec <- unique(rule_exec) # remove same rules. NOTE: for variable interaction analysis, you should NOT perform this step
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
# freq_patterns <- getFreqPattern(rule_metric,maxlen = 3) # can be less useful for numeric variables.
rule_metric <- pruneRule(rule_metric,X,Y,typeDecay = 1)
rule_select <- selectRuleRRF(rule_metric, X, Y)
rule_metric <- unique(rule_metric)
rule_classifier <- buildLearner(rule_metric,X,Y)
readable <- presentRules(rule_classifier,colnames(X),digits=3)
pred <- applyLearner(rule_classifier,X)
print(readable)
print( 1-sum(pred==Y)/length(pred) )
rule_exec <- extractRules(tree_list,X,digits=10)
rule_metric <- getRuleMetric(rule_exec,X,Y)
rule_exec
rm(list= ls())
library(ranger)
# library(inTrees)
sourceDir <- function(path, trace = TRUE) {
for (nm in list.files(path, pattern = "\\.[Rr]$")) {
if(trace) cat(nm)
source(file.path(path, nm))
if(trace) cat("\n")
}
}
sourceDir("devR/")
# data 1
X <- within(iris,rm("Species")); Y <- iris[,"Species"]
rf_ranger <- ranger(Species ~ ., data = iris)
# data set 2
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
tree_list <- Ranger2List(rf_ranger)
rule_exec <- extractRules(tree_list,X,digits=10)
rule_exec
X
X[,4]
summary(X[,4])
debug(getRuleMetric)
Y
rule_metric <- getRuleMetric(rule_exec,X,Y)
dIx
length(ruleMetric)
ruleMetric[1:4,]
rule_exec[1:4,]
tree_list$list[[1]]
debug(extractRules)
rule_exec <- extractRules(tree_list,X,digits=10)
itree
iTree
tree
res
res$ruleSet
debug(extractRules)
debug(treeVisit)
rule_exec <- extractRules(tree_list,X,digits=10)
treeList
undebug(extractRules)
rule_exec <- extractRules(tree_list,X,digits=10)
tree
xIx
X
tree_list
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf_ranger <- ranger(Species ~ ., data = iris)
tree_list <- Ranger2List(rf_ranger)
rule_exec <- extractRules(tree_list,X,digits=10)
rule_exec <- unique(rule_exec) # remove same rules. NOTE: for variable interaction analysis, you should NOT perform this step
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
# freq_patterns <- getFreqPattern(rule_metric,maxlen = 3) # can be less useful for numeric variables.
rule_metric <- pruneRule(rule_metric,X,Y,typeDecay = 1)
rule_select <- selectRuleRRF(rule_metric, X, Y)
rule_metric <- unique(rule_metric)
rule_classifier <- buildLearner(rule_metric,X,Y)
readable <- presentRules(rule_classifier,colnames(X),digits=3)
pred <- applyLearner(rule_classifier,X)
print(readable)
print( 1-sum(pred==Y)/length(pred) )
rm(list= ls())
library(ranger)
# library(inTrees)
sourceDir <- function(path, trace = TRUE) {
for (nm in list.files(path, pattern = "\\.[Rr]$")) {
if(trace) cat(nm)
source(file.path(path, nm))
if(trace) cat("\n")
}
}
sourceDir("devR/")
# data 1
X <- within(iris,rm("Species")); Y <- iris[,"Species"]
rf_ranger <- ranger(Species ~ ., data = iris)
# data set 2
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf_ranger <- ranger(Species ~ ., data = iris)
tree_list <- Ranger2List(rf_ranger)
rule_exec <- extractRules(tree_list,X,digits=10)
undebug(treeVisit)
rule_exec <- extractRules(tree_list,X,digits=10)
rule_exec <- unique(rule_exec)
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
rm(list= ls())
library(ranger)
# library(inTrees)
sourceDir <- function(path, trace = TRUE) {
for (nm in list.files(path, pattern = "\\.[Rr]$")) {
if(trace) cat(nm)
source(file.path(path, nm))
if(trace) cat("\n")
}
}
sourceDir("devR/")
# data 1
X <- within(iris,rm("Species")); Y <- iris[,"Species"]
rf_ranger <- ranger(Species ~ ., data = iris)
# data set 2
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf_ranger <- ranger(Species ~ ., data = iris)
tree_list <- Ranger2List(rf_ranger)
rm(list= ls())
library(ranger)
# library(inTrees)
sourceDir <- function(path, trace = TRUE) {
for (nm in list.files(path, pattern = "\\.[Rr]$")) {
if(trace) cat(nm)
source(file.path(path, nm))
if(trace) cat("\n")
}
}
sourceDir("devR/")
# data 1
X <- within(iris,rm("Species")); Y <- iris[,"Species"]
rf_ranger <- ranger(Species ~ ., data = iris)
# data set 2
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf_ranger <- ranger(Species ~ ., data = iris)
tree_list <- Ranger2List(rf_ranger)
sourceDir("devR/")
tree_list <- Ranger2List(rf_ranger)
tree_list
Ranger2List
sourceDir("devR/")
sourceDir("Test/devR/")
# data 1
X <- within(iris,rm("Species")); Y <- iris[,"Species"]
rf_ranger <- ranger(Species ~ ., data = iris)
# data set 2
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf_ranger <- ranger(Species ~ ., data = iris)
tree_list <- Ranger2List(rf_ranger)
rule_exec <- extractRules(tree_list,X,digits=10)
rule_exec <- unique(rule_exec) # remove same rules. NOTE: for variable interaction analysis, you should NOT perform this step
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
# freq_patterns <- getFreqPattern(rule_metric,maxlen = 3) # can be less useful for numeric variables.
rule_metric <- pruneRule(rule_metric,X,Y,typeDecay = 1)
rule_select <- selectRuleRRF(rule_metric, X, Y)
rule_metric <- unique(rule_metric)
rule_classifier <- buildLearner(rule_metric,X,Y)
readable <- presentRules(rule_classifier,colnames(X),digits=3)
pred <- applyLearner(rule_classifier,X)
print(readable)
print( 1-sum(pred==Y)/length(pred) )
X
tree_list
rf_ranger
# data set 2
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf_ranger <- ranger(Species ~ ., data = data)
# data set 2
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf_ranger <- ranger(Y ~ ., data = data)
tree_list <- Ranger2List(rf_ranger)
rule_exec <- extractRules(tree_list,X,digits=10)
rule_exec <- unique(rule_exec) # remove same rules. NOTE: for variable interaction analysis, you should NOT perform this step
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
# freq_patterns <- getFreqPattern(rule_metric,maxlen = 3) # can be less useful for numeric variables.
rule_metric <- pruneRule(rule_metric,X,Y,typeDecay = 1)
rule_select <- selectRuleRRF(rule_metric, X, Y)
rule_metric <- unique(rule_metric)
rule_classifier <- buildLearner(rule_metric,X,Y)
readable <- presentRules(rule_classifier,colnames(X),digits=3)
pred <- applyLearner(rule_classifier,X)
print(readable)
print( 1-sum(pred==Y)/length(pred) )
rm(list= ls())
library(ranger)
library(inTrees)
sourceDir <- function(path, trace = TRUE) {
for (nm in list.files(path, pattern = "\\.[Rr]$")) {
if(trace) cat(nm)
source(file.path(path, nm))
if(trace) cat("\n")
}
}
sourceDir("Test/devR/")
# data 1
X <- within(iris,rm("Species")); Y <- iris[,"Species"]
rf_ranger <- ranger(Species ~ ., data = iris)
# data set 2
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf_ranger <- ranger(Y ~ ., data = data)
tree_list <- Ranger2List(rf_ranger)
rule_exec <- extractRules(tree_list,X,digits=10)
rule_exec <- unique(rule_exec) # remove same rules. NOTE: for variable interaction analysis, you should NOT perform this step
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
# freq_patterns <- getFreqPattern(rule_metric,maxlen = 3) # can be less useful for numeric variables.
rule_metric <- pruneRule(rule_metric,X,Y,typeDecay = 1)
rule_select <- selectRuleRRF(rule_metric, X, Y)
rule_metric <- unique(rule_metric)
rule_classifier <- buildLearner(rule_metric,X,Y)
readable <- presentRules(rule_classifier,colnames(X),digits=3)
pred <- applyLearner(rule_classifier,X)
print(readable)
print( 1-sum(pred==Y)/length(pred) )
selectRuleRRF
rm(list= ls())
library(ranger)
library(inTrees)
library(RRF)
sourceDir <- function(path, trace = TRUE) {
for (nm in list.files(path, pattern = "\\.[Rr]$")) {
if(trace) cat(nm)
source(file.path(path, nm))
if(trace) cat("\n")
}
}
sourceDir("Test/devR/")
# data 1
X <- within(iris,rm("Species")); Y <- iris[,"Species"]
rf_ranger <- ranger(Species ~ ., data = iris)
# data set 2
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf_ranger <- ranger(Y ~ ., data = data)
tree_list <- Ranger2List(rf_ranger)
rule_exec <- extractRules(tree_list,X,digits=10)
rule_exec <- unique(rule_exec) # remove same rules. NOTE: for variable interaction analysis, you should NOT perform this step
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
# freq_patterns <- getFreqPattern(rule_metric,maxlen = 3) # can be less useful for numeric variables.
rule_metric <- pruneRule(rule_metric,X,Y,typeDecay = 1)
rule_select <- selectRuleRRF(rule_metric, X, Y)
rule_metric <- unique(rule_metric)
rule_classifier <- buildLearner(rule_metric,X,Y)
readable <- presentRules(rule_classifier,colnames(X),digits=3)
pred <- applyLearner(rule_classifier,X)
print(readable)
print( 1-sum(pred==Y)/length(pred) )
debug(getRuleMetric)
rule_metric <- getRuleMetric(rule_exec,X,Y)
dIx
ruleMetric[1:3,]
ruleExec[1:2,]
X[,1] %in% c('0DM','no-account','over-200DM') & X[,4] %in% c(' domestic-app') & X[,7] %in% c(' over-seven') & X[,14] %in% c(' bank')
tree_list
X[,1] %in% c('0DM','no-account','over-200DM') & X[,4] %in% c(' domestic-app') & X[,7] %in% c(' over-seven') & X[,14] %in% c(' bank')
tree_list$list[[1]]
tree_list$list[[2]]
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf_ranger <- ranger(Y ~ ., data = data)
tree_list <- Ranger2List(rf_ranger)
tree_list$list[[1]]
rm(list= ls())
library(ranger)
library(inTrees)
library(RRF)
rm(list= ls())
library(ranger)
library(inTrees)
library(RRF)
sourceDir <- function(path, trace = TRUE) {
for (nm in list.files(path, pattern = "\\.[Rr]$")) {
if(trace) cat(nm)
source(file.path(path, nm))
if(trace) cat("\n")
}
}
sourceDir("Test/devR/")
# data set 2
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf_ranger <- ranger(Y ~ ., data = data)
rf_ranger
tree_list <- Ranger2List(rf_ranger)
tree_list$list[[1]]
rm(list= ls())
library(randomForest)
library(inTrees)
# data set 2
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf <- randomForest(X, as.factor(Y),ntree=100)
rf <- randomForest(X, as.factor(Y),ntree=100)
tree_list <- RF2List(rf)
tree_list$list[[1]]
X[,15]
rule_exec <- extractRules(tree_list,X,digits=3)
rule_exec <- unique(rule_exec) # remove same rules. NOTE: for variable interaction analysis, you should NOT perform this step
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
# freq_patterns <- getFreqPattern(rule_metric,maxlen = 3) # can be less useful for numeric variables.
rule_metric <- pruneRule(rule_metric,X,Y,typeDecay = 1)
rule_select <- selectRuleRRF(rule_metric, X, Y)
rule_metric <- unique(rule_metric)
rule_classifier <- buildLearner(rule_metric,X,Y)
readable <- presentRules(rule_classifier,colnames(X),digits=3)
pred <- applyLearner(rule_classifier,X)
print( 1-sum(pred==Y)/length(pred) )
rf
data[1:3,]
tree_list$list[[1]]
debug(treeVisit)
rule_exec[1:3,]
which(X[,1] %in% c('no-account') & X[,4] %in% c(' education',' new-car') & X[,6] %in% c(' less500DM',' unknown') & X[,13]<=44.5)
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf_ranger <- ranger(Y ~ ., data = data)
tree_list <- Ranger2List(rf_ranger)
rule_exec <- extractRules(tree_list,X,digits=10)
tree
xIx
levelX[[xIx]]
as.integer(xValue)
xValue
xValue <- which(as.integer(intToBits(as.integer(xValue))) >
0)
xValue
intToBits(as.integer(xValue))
lValue <- levelX[[xIx]][xValue]
rValue <- setdiff(levelX[[xIx]], lValue)
lValue
rValue
undebug(treeVisit)
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf_ranger <- ranger(Y ~ ., data = data)
tree_list <- Ranger2List(rf_ranger)
rule_exec <- extractRules(tree_list,X,digits=10)
rule_exec[1:3,]
rule_exec <- extractRules(tree_list,X,digits=10)
rule_exec <- unique(rule_exec) # remove same rules. NOTE: for variable interaction analysis, you should NOT perform this step
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
debug(getRuleMetric)
rule_exec <- extractRules(tree_list,X,digits=10)
rule_exec <- unique(rule_exec) # remove same rules. NOTE: for variable interaction analysis, you should NOT perform this step
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
dIx
ruleMetric[23,]
which(X[,1] %in% c('less-200DM'))
which(X[,1] %in% c('less-200DM') & X[,3] %in% c(' all-paid-duly',' critical',' delay',' duly-till-now') )
which(X[,1] %in% c('less-200DM') & X[,3] %in% c(' all-paid-duly',' critical',' delay',' duly-till-now') & X[,6] %in% c(' less1000DM',' less100DM') & X[,12] %in% c(' building-society',' car') )
which(X[,1] %in% c('less-200DM') & X[,3] %in% c(' all-paid-duly',' critical',' delay',' duly-till-now') & X[,6] %in% c(' less1000DM',' less100DM') & X[,12] %in% c(' building-society',' car') & X[,13]>25.5 & X[,19] %in% c(' no'))
dIx
ruleMetric <- t(sapply(ruleExec[, "condition", drop = FALSE],
measureRule, X, target))
rownames(ruleMetric) = NULL
colnames(ruleMetric) <- c("len", "freq", "err", "condition",
"pred")
dIx <- which(ruleMetric[, "len"] == "-1")
dIx
ruleMetric[23,]
ruleExec[23,]
which(X[,1] %in% c('0DM','no-account','over-200DM'))
"X[,1] %in% c('0DM','no-account','over-200DM') & X[,2]<=17 & X[,3] %in% c(' bank-paid-duly') & X[,4] %in% c(' business',' education') & X[,5]<=7668.5 & X[,9] %in% c(' male-divorced')"
which(X[,1] %in% c('0DM','no-account','over-200DM') & X[,2]<=17 & X[,3] %in% c(' bank-paid-duly') )
which(X[,1] %in% c('0DM','no-account','over-200DM') & X[,2]<=17 & X[,3] %in% c(' bank-paid-duly') & X[,4] %in% c(' business',' education'))
X[,5]
which(X[,1] %in% c('0DM','no-account','over-200DM') & X[,2]<=17 & X[,3] %in% c(' bank-paid-duly') & X[,4] %in% c(' business',' education') & X[,5]<=7668.5)
which(X[,1] %in% c('0DM','no-account','over-200DM') & X[,2]<=17 & X[,3] %in% c(' bank-paid-duly') & X[,4] %in% c(' business',' education') & X[,5]<=7668.5 & X[,9] %in% c(' male-divorced'))
rule_exec <- extractRules(tree_list,X,digits=10)
rule_exec <- unique(rule_exec) # remove same rules. NOTE: for variable interaction analysis, you should NOT perform this step
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
undebug(getRuleMetric)
rule_exec <- extractRules(tree_list,X,digits=10)
rule_exec <- unique(rule_exec) # remove same rules. NOTE: for variable interaction analysis, you should NOT perform this step
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
rule_metric[1:10,]
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
# freq_patterns <- getFreqPattern(rule_metric,maxlen = 3) # can be less useful for numeric variables.
rule_metric <- pruneRule(rule_metric,X,Y,typeDecay = 1)
rule_select <- selectRuleRRF(rule_metric, X, Y)
rule_metric <- unique(rule_metric)
rule_classifier <- buildLearner(rule_metric,X,Y)
readable <- presentRules(rule_classifier,colnames(X),digits=3)
pred <- applyLearner(rule_classifier,X)
print(readable)
324/4145
# data set 2
path <- paste(getwd(), "/Test/data/german.data",sep="") #musk vehicle is good austra
data <- read.table(path,header=TRUE,sep = ",")
X <- within(data,rm("Y")); Y <- data$Y
rf <- randomForest(X, as.factor(Y),ntree=100)
tree_list <- RF2List(rf)
rule_exec <- extractRules(tree_list,X,digits=3)
rule_exec <- unique(rule_exec) # remove same rules. NOTE: for variable interaction analysis, you should NOT perform this step
ix <- sample(1:length(rule_exec),min(2000,length(rule_exec))) #randomly select 2000 rules
rule_exec <- rule_exec[ix,,drop=FALSE]
rule_metric <- getRuleMetric(rule_exec,X,Y)
rule_metrics
